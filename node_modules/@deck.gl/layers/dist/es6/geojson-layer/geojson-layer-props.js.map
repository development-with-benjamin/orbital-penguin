{"version":3,"sources":["../../../src/geojson-layer/geojson-layer-props.js"],"names":["calculatePickingColors","createEmptyLayerProps","points","lines","polygons","polygonsOutline","getCoordinates","f","geometry","coordinates","createLayerPropsFromFeatures","features","featuresDiff","layerProps","pointFeatures","lineFeatures","polygonFeatures","polygonOutlineFeatures","data","_dataDiff","getPosition","getPath","getPolygon","createLayerPropsFromBinary","geojsonBinary","uniqueIdProperty","encodePickingColor","customPickingColors","length","positions","value","size","attributes","pickingColors","properties","numericProps","featureIds","pathIndices","startIndices","_pathType","primitivePolygonIndices","_normalize","instancePickingColors"],"mappings":"AAAA,SAAQA,sBAAR,QAAqC,kBAArC;;AAEA,SAASC,qBAAT,GAAiC;AAC/B,SAAO;AACLC,IAAAA,MAAM,EAAE,EADH;AAELC,IAAAA,KAAK,EAAE,EAFF;AAGLC,IAAAA,QAAQ,EAAE,EAHL;AAILC,IAAAA,eAAe,EAAE;AAJZ,GAAP;AAMD;;AAED,SAASC,cAAT,CAAwBC,CAAxB,EAA2B;AACzB,SAAOA,CAAC,CAACC,QAAF,CAAWC,WAAlB;AACD;;AAED,OAAO,SAASC,4BAAT,CAAsCC,QAAtC,EAAgDC,YAAhD,EAA8D;AACnE,QAAMC,UAAU,GAAGZ,qBAAqB,EAAxC;AACA,QAAM;AAACa,IAAAA,aAAD;AAAgBC,IAAAA,YAAhB;AAA8BC,IAAAA,eAA9B;AAA+CC,IAAAA;AAA/C,MAAyEN,QAA/E;AAEAE,EAAAA,UAAU,CAACX,MAAX,CAAkBgB,IAAlB,GAAyBJ,aAAzB;;AACAD,EAAAA,UAAU,CAACX,MAAX,CAAkBiB,SAAlB,GAA8BP,YAAY,CAACE,aAAb,KAA+B,MAAMF,YAAY,CAACE,aAAlD,CAA9B;;AACAD,EAAAA,UAAU,CAACX,MAAX,CAAkBkB,WAAlB,GAAgCd,cAAhC;AAEAO,EAAAA,UAAU,CAACV,KAAX,CAAiBe,IAAjB,GAAwBH,YAAxB;;AACAF,EAAAA,UAAU,CAACV,KAAX,CAAiBgB,SAAjB,GAA6BP,YAAY,CAACG,YAAb,KAA8B,MAAMH,YAAY,CAACG,YAAjD,CAA7B;;AACAF,EAAAA,UAAU,CAACV,KAAX,CAAiBkB,OAAjB,GAA2Bf,cAA3B;AAEAO,EAAAA,UAAU,CAACT,QAAX,CAAoBc,IAApB,GAA2BF,eAA3B;;AACAH,EAAAA,UAAU,CAACT,QAAX,CAAoBe,SAApB,GACEP,YAAY,CAACI,eAAb,KAAiC,MAAMJ,YAAY,CAACI,eAApD,CADF;;AAEAH,EAAAA,UAAU,CAACT,QAAX,CAAoBkB,UAApB,GAAiChB,cAAjC;AAEAO,EAAAA,UAAU,CAACR,eAAX,CAA2Ba,IAA3B,GAAkCD,sBAAlC;;AACAJ,EAAAA,UAAU,CAACR,eAAX,CAA2Bc,SAA3B,GACEP,YAAY,CAACK,sBAAb,KAAwC,MAAML,YAAY,CAACK,sBAA3D,CADF;;AAEAJ,EAAAA,UAAU,CAACR,eAAX,CAA2BgB,OAA3B,GAAqCf,cAArC;AAEA,SAAOO,UAAP;AACD;AAED,OAAO,SAASU,0BAAT,CAAoCC,aAApC,EAAmDC,gBAAnD,EAAqEC,kBAArE,EAAyF;AAC9F,QAAMb,UAAU,GAAGZ,qBAAqB,EAAxC;AACA,QAAM;AAACC,IAAAA,MAAD;AAASC,IAAAA,KAAT;AAAgBC,IAAAA;AAAhB,MAA4BoB,aAAlC;AAEA,QAAMG,mBAAmB,GAAG3B,sBAAsB,CAChDwB,aADgD,EAEhDC,gBAFgD,EAGhDC,kBAHgD,CAAlD;AAMAb,EAAAA,UAAU,CAACX,MAAX,CAAkBgB,IAAlB,GAAyB;AACvBU,IAAAA,MAAM,EAAE1B,MAAM,CAAC2B,SAAP,CAAiBC,KAAjB,CAAuBF,MAAvB,GAAgC1B,MAAM,CAAC2B,SAAP,CAAiBE,IADlC;AAEvBC,IAAAA,UAAU,EAAE;AACVZ,MAAAA,WAAW,EAAElB,MAAM,CAAC2B,SADV;AAEVI,MAAAA,aAAa,EAAE;AACbF,QAAAA,IAAI,EAAE,CADO;AAEbD,QAAAA,KAAK,EAAEH,mBAAmB,CAACzB;AAFd;AAFL,KAFW;AASvBgC,IAAAA,UAAU,EAAEhC,MAAM,CAACgC,UATI;AAUvBC,IAAAA,YAAY,EAAEjC,MAAM,CAACiC,YAVE;AAWvBC,IAAAA,UAAU,EAAElC,MAAM,CAACkC;AAXI,GAAzB;AAcAvB,EAAAA,UAAU,CAACV,KAAX,CAAiBe,IAAjB,GAAwB;AACtBU,IAAAA,MAAM,EAAEzB,KAAK,CAACkC,WAAN,CAAkBP,KAAlB,CAAwBF,MAAxB,GAAiC,CADnB;AAEtBU,IAAAA,YAAY,EAAEnC,KAAK,CAACkC,WAAN,CAAkBP,KAFV;AAGtBE,IAAAA,UAAU,EAAE;AACVX,MAAAA,OAAO,EAAElB,KAAK,CAAC0B,SADL;AAEVI,MAAAA,aAAa,EAAE;AACbF,QAAAA,IAAI,EAAE,CADO;AAEbD,QAAAA,KAAK,EAAEH,mBAAmB,CAACxB;AAFd;AAFL,KAHU;AAUtB+B,IAAAA,UAAU,EAAE/B,KAAK,CAAC+B,UAVI;AAWtBC,IAAAA,YAAY,EAAEhC,KAAK,CAACgC,YAXE;AAYtBC,IAAAA,UAAU,EAAEjC,KAAK,CAACiC;AAZI,GAAxB;AAcAvB,EAAAA,UAAU,CAACV,KAAX,CAAiBoC,SAAjB,GAA6B,MAA7B;AAEA1B,EAAAA,UAAU,CAACT,QAAX,CAAoBc,IAApB,GAA2B;AACzBU,IAAAA,MAAM,EAAExB,QAAQ,CAACoC,uBAAT,CAAiCV,KAAjC,CAAuCF,MADtB;AAEzBU,IAAAA,YAAY,EAAElC,QAAQ,CAACoC,uBAAT,CAAiCV,KAFtB;AAGzBE,IAAAA,UAAU,EAAE;AACVV,MAAAA,UAAU,EAAElB,QAAQ,CAACyB,SADX;AAEVI,MAAAA,aAAa,EAAE;AACbF,QAAAA,IAAI,EAAE,CADO;AAEbD,QAAAA,KAAK,EAAEH,mBAAmB,CAACvB;AAFd;AAFL,KAHa;AAUzB8B,IAAAA,UAAU,EAAE9B,QAAQ,CAAC8B,UAVI;AAWzBC,IAAAA,YAAY,EAAE/B,QAAQ,CAAC+B,YAXE;AAYzBC,IAAAA,UAAU,EAAEhC,QAAQ,CAACgC;AAZI,GAA3B;AAcAvB,EAAAA,UAAU,CAACT,QAAX,CAAoBqC,UAApB,GAAiC,KAAjC;AAEA5B,EAAAA,UAAU,CAACR,eAAX,CAA2Ba,IAA3B,GAAkC;AAChCU,IAAAA,MAAM,EAAExB,QAAQ,CAACoC,uBAAT,CAAiCV,KAAjC,CAAuCF,MADf;AAEhCU,IAAAA,YAAY,EAAElC,QAAQ,CAACoC,uBAAT,CAAiCV,KAFf;AAGhCE,IAAAA,UAAU,EAAE;AACVX,MAAAA,OAAO,EAAEjB,QAAQ,CAACyB,SADR;AAEVa,MAAAA,qBAAqB,EAAE;AACrBX,QAAAA,IAAI,EAAE,CADe;AAErBD,QAAAA,KAAK,EAAEH,mBAAmB,CAACvB;AAFN;AAFb,KAHoB;AAUhC8B,IAAAA,UAAU,EAAE9B,QAAQ,CAAC8B,UAVW;AAWhCC,IAAAA,YAAY,EAAE/B,QAAQ,CAAC+B,YAXS;AAYhCC,IAAAA,UAAU,EAAEhC,QAAQ,CAACgC;AAZW,GAAlC;AAcAvB,EAAAA,UAAU,CAACR,eAAX,CAA2BkC,SAA3B,GAAuC,MAAvC;AAEA,SAAO1B,UAAP;AACD","sourcesContent":["import {calculatePickingColors} from './geojson-binary';\n\nfunction createEmptyLayerProps() {\n  return {\n    points: {},\n    lines: {},\n    polygons: {},\n    polygonsOutline: {}\n  };\n}\n\nfunction getCoordinates(f) {\n  return f.geometry.coordinates;\n}\n\nexport function createLayerPropsFromFeatures(features, featuresDiff) {\n  const layerProps = createEmptyLayerProps();\n  const {pointFeatures, lineFeatures, polygonFeatures, polygonOutlineFeatures} = features;\n\n  layerProps.points.data = pointFeatures;\n  layerProps.points._dataDiff = featuresDiff.pointFeatures && (() => featuresDiff.pointFeatures);\n  layerProps.points.getPosition = getCoordinates;\n\n  layerProps.lines.data = lineFeatures;\n  layerProps.lines._dataDiff = featuresDiff.lineFeatures && (() => featuresDiff.lineFeatures);\n  layerProps.lines.getPath = getCoordinates;\n\n  layerProps.polygons.data = polygonFeatures;\n  layerProps.polygons._dataDiff =\n    featuresDiff.polygonFeatures && (() => featuresDiff.polygonFeatures);\n  layerProps.polygons.getPolygon = getCoordinates;\n\n  layerProps.polygonsOutline.data = polygonOutlineFeatures;\n  layerProps.polygonsOutline._dataDiff =\n    featuresDiff.polygonOutlineFeatures && (() => featuresDiff.polygonOutlineFeatures);\n  layerProps.polygonsOutline.getPath = getCoordinates;\n\n  return layerProps;\n}\n\nexport function createLayerPropsFromBinary(geojsonBinary, uniqueIdProperty, encodePickingColor) {\n  const layerProps = createEmptyLayerProps();\n  const {points, lines, polygons} = geojsonBinary;\n\n  const customPickingColors = calculatePickingColors(\n    geojsonBinary,\n    uniqueIdProperty,\n    encodePickingColor\n  );\n\n  layerProps.points.data = {\n    length: points.positions.value.length / points.positions.size,\n    attributes: {\n      getPosition: points.positions,\n      pickingColors: {\n        size: 3,\n        value: customPickingColors.points\n      }\n    },\n    properties: points.properties,\n    numericProps: points.numericProps,\n    featureIds: points.featureIds\n  };\n\n  layerProps.lines.data = {\n    length: lines.pathIndices.value.length - 1,\n    startIndices: lines.pathIndices.value,\n    attributes: {\n      getPath: lines.positions,\n      pickingColors: {\n        size: 3,\n        value: customPickingColors.lines\n      }\n    },\n    properties: lines.properties,\n    numericProps: lines.numericProps,\n    featureIds: lines.featureIds\n  };\n  layerProps.lines._pathType = 'open';\n\n  layerProps.polygons.data = {\n    length: polygons.primitivePolygonIndices.value.length,\n    startIndices: polygons.primitivePolygonIndices.value,\n    attributes: {\n      getPolygon: polygons.positions,\n      pickingColors: {\n        size: 3,\n        value: customPickingColors.polygons\n      }\n    },\n    properties: polygons.properties,\n    numericProps: polygons.numericProps,\n    featureIds: polygons.featureIds\n  };\n  layerProps.polygons._normalize = false;\n\n  layerProps.polygonsOutline.data = {\n    length: polygons.primitivePolygonIndices.value.length,\n    startIndices: polygons.primitivePolygonIndices.value,\n    attributes: {\n      getPath: polygons.positions,\n      instancePickingColors: {\n        size: 3,\n        value: customPickingColors.polygons\n      }\n    },\n    properties: polygons.properties,\n    numericProps: polygons.numericProps,\n    featureIds: polygons.featureIds\n  };\n  layerProps.polygonsOutline._pathType = 'open';\n\n  return layerProps;\n}\n"],"file":"geojson-layer-props.js"}