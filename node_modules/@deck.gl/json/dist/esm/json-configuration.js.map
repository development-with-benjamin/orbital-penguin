{"version":3,"sources":["../../src/json-configuration.js"],"names":["parseExpressionString","assert","TYPE_KEY","FUNCTION_KEY","isObject","value","JSONConfiguration","typeKey","functionKey","log","console","classes","reactComponents","enumerations","constants","functions","convertFunction","preProcessClassProps","Class","props","postProcessConvertedJson","json","configurations","configuration","merge","key","Object","assign"],"mappings":";;;AACA,OAAOA,qBAAP,MAAkC,mCAAlC;AACA,OAAOC,MAAP,MAAmB,gBAAnB;AAEA,SAAQC,QAAR,EAAkBC,YAAlB,QAAqC,mBAArC;;AAEA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAAAC,KAAK;AAAA,SAAIA,KAAK,IAAI,QAAOA,KAAP,MAAiB,QAA9B;AAAA,CAAtB;;IAEqBC,iB;AACnB,+BAA+B;AAAA;;AAE7B,SAAKC,OAAL,GAAeL,QAAf;AACA,SAAKM,WAAL,GAAmBL,YAAnB;AACA,SAAKM,GAAL,GAAWC,OAAX;AACA,SAAKC,OAAL,GAAe,EAAf;AACA,SAAKC,eAAL,GAAuB,EAAvB;AACA,SAAKC,YAAL,GAAoB,EAApB;AACA,SAAKC,SAAL,GAAiB,EAAjB;AACA,SAAKC,SAAL,GAAiB,EAAjB;AAEA,SAAKC,eAAL,GAAuBhB,qBAAvB;;AACA,SAAKiB,oBAAL,GAA4B,UAACC,KAAD,EAAQC,KAAR;AAAA,aAAkBA,KAAlB;AAAA,KAA5B;;AACA,SAAKC,wBAAL,GAAgC,UAAAC,IAAI;AAAA,aAAIA,IAAJ;AAAA,KAApC;;AAb6B,sCAAhBC,cAAgB;AAAhBA,MAAAA,cAAgB;AAAA;;AAe7B,uCAA4BA,cAA5B,qCAA4C;AAAvC,UAAMC,aAAa,sBAAnB;AACH,WAAKC,KAAL,CAAWD,aAAX;AACD;AACF;;;;0BAEKA,a,EAAe;AACnB,WAAK,IAAME,GAAX,IAAkBF,aAAlB,EAAiC;AAC/B,gBAAQE,GAAR;AAEE,eAAK,QAAL;AACA,eAAK,OAAL;AACEC,YAAAA,MAAM,CAACC,MAAP,CAAc,KAAKhB,OAAnB,EAA4BY,aAAa,CAACE,GAAD,CAAzC;AACA;;AACF;AAEE,gBAAIA,GAAG,IAAI,IAAX,EAAiB;AACf,kBAAMpB,KAAK,GAAGkB,aAAa,CAACE,GAAD,CAA3B;AACA,mBAAKA,GAAL,IAAYrB,QAAQ,CAAC,KAAKqB,GAAL,CAAD,CAAR,GAAsBC,MAAM,CAACC,MAAP,CAAc,KAAKF,GAAL,CAAd,EAAyBpB,KAAzB,CAAtB,GAAwDA,KAApE;AACD;;AAXL;AAaD;AACF;;;6BAEQkB,a,EAAe;AACtBtB,MAAAA,MAAM,CAAC,CAAC,KAAKM,OAAN,IAAiB,OAAO,KAAKA,OAAZ,KAAwB,QAA1C,CAAN;AACAN,MAAAA,MAAM,CAACG,QAAQ,CAAC,KAAKO,OAAN,CAAT,CAAN;AACA,aAAO,IAAP;AACD;;;;;;SA3CkBL,iB","sourcesContent":["// TODO - default parsing code should not be part of the configuration.\nimport parseExpressionString from './helpers/parse-expression-string';\nimport assert from './utils/assert';\n\nimport {TYPE_KEY, FUNCTION_KEY} from './syntactic-sugar';\n\nconst isObject = value => value && typeof value === 'object';\n\nexport default class JSONConfiguration {\n  constructor(...configurations) {\n    // Initialize config with default values\n    this.typeKey = TYPE_KEY;\n    this.functionKey = FUNCTION_KEY;\n    this.log = console; // eslint-disable-line\n    this.classes = {};\n    this.reactComponents = {};\n    this.enumerations = {};\n    this.constants = {};\n    this.functions = {};\n    // TODO - this needs to be simpler, function conversion should be built in\n    this.convertFunction = parseExpressionString;\n    this.preProcessClassProps = (Class, props) => props;\n    this.postProcessConvertedJson = json => json;\n\n    for (const configuration of configurations) {\n      this.merge(configuration);\n    }\n  }\n\n  merge(configuration) {\n    for (const key in configuration) {\n      switch (key) {\n        // DEPRECATED = For backwards compatibility, add views and layers to classes;\n        case 'layers':\n        case 'views':\n          Object.assign(this.classes, configuration[key]);\n          break;\n        default:\n          // Store configuration as root fields (this.classes, ...)\n          if (key in this) {\n            const value = configuration[key];\n            this[key] = isObject(this[key]) ? Object.assign(this[key], value) : value;\n          }\n      }\n    }\n  }\n\n  validate(configuration) {\n    assert(!this.typeKey || typeof this.typeKey === 'string');\n    assert(isObject(this.classes));\n    return true;\n  }\n}\n"],"file":"json-configuration.js"}